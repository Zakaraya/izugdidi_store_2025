{% extends "base.html" %}
{% load i18n %}

{% block title %}{% blocktrans with id=order.id %}Статус заказа №{{ id }}{% endblocktrans %}{% endblock %}

{% block content %}
<div class="container">
  <h1 class="section-title">{% blocktrans with id=order.id %}Заказ №{{ id }}{% endblocktrans %}</h1>

  <div class="card" style="margin-bottom: 32px;">
    <div class="grid-2">
      <div>
        <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">{% trans "Текущий статус" %}</div>
        <div class="badge">{{ order.get_status_display }}</div>
      </div>
      <div>
        <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">{% trans "Сумма заказа" %}</div>
        <div class="price" style="font-size: 20px;">{{ order.total }} {{ order.currency }}</div>
      </div>
      {% if order.tracking_number %}
      <div>
        <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">{% trans "Трек-номер" %}</div>
        <b>{{ order.tracking_number }}</b>
      </div>
      {% endif %}
    </div>
     {% if order.status == 'pending' %}
      <hr style="border: none; border-top: 1px solid var(--border); margin: 20px 0;">
      <a class="btn" href="{% url 'payments:pay_page' order.id %}">{% trans "Оплатить" %}</a>
    {% endif %}
  </div>

  <h3 style="text-align: center; margin-bottom: 24px;">{% trans "Этапы выполнения" %}</h3>

  {# Десктоп #}
  <div class="steps">
    <div class="step {% if step_pending %}done{% endif %}">{% trans "Принят" %}</div>
    <div class="step {% if step_paid %}done{% endif %}">{% trans "Оплачен" %}</div>
    <div class="step {% if step_processing %}done{% endif %}">{% trans "В обработке" %}</div>
    <div class="step {% if step_shipped %}done{% endif %}">{% trans "В доставке" %}</div>
    <div class="step {% if step_delivered %}done{% endif %}">{% trans "Доставлен" %}</div>
  </div>

  {# Мобильная версия #}
  <div class="steps-mobile">
    <div class="mstep {% if step_pending %}done{% endif %}"><span class="dot"></span><span>{% trans "Принят" %}</span></div>
    <div class="mstep {% if step_paid %}done{% endif %}"><span class="dot"></span><span>{% trans "Оплачен" %}</span></div>
    <div class="mstep {% if step_processing %}done{% endif %}"><span class="dot"></span><span>{% trans "В обработке" %}</span></div>
    <div class="mstep {% if step_shipped %}done{% endif %}"><span class="dot"></span><span>{% trans "В доставке" %}</span></div>
    <div class="mstep {% if step_delivered %}done{% endif %}"><span class="dot"></span><span>{% trans "Доставлен" %}</span></div>
  </div>

  <div style="text-align: center; margin-top: 40px;">
    <a class="btn secondary" href="{% url 'catalog:product_list' %}">{% trans "Вернуться в каталог" %}</a>
  </div>
</div>
{% endblock %}